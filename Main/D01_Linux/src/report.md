/* clang-format off */

## Part 1. Установка ОС
* Версия Ubuntu
* ![alt text](images/issue.png)

## Part 2. Создание пользователя
* Создание и добавление нового пользователя в adm
* ![alt text](images/puppy1.png)
* Вывод команды cat /etc/passwd
* ![alt text](images/puppy2.png)
* Проверка групп пользователя
 * ![alt text](images/puppy3.png)

## Part 3. Настройка сети ОС
* **_Задай название машины вида user-1._**
 * ![alt text](images/3-1.png)
*  Перезапускаем систему для отоброжения 
 * ![alt text](images/3-1-1.png)
* **_Установи временную зону, соответствующую твоему текущему местоположению._**
 * ![alt text](images/3-2.png)
* **_Выведи названия сетевых интерфейсов с помощью консольной команды._**
 * ![alt text](images/3-3.png)
* * lo - зацикленный интерфейс для передачи данных между процессами в самой системе; 
  * enp0s8 - Ethernet-интерфейс, сетевой адаптер для машины; 
* **_Используя консольную команду, получи ip адрес устройства, на котором ты работаешь, от DHCP-сервера._**
 * ![alt text](images/3-4.png)
* * DHCP (Dynamic Host Configuration Protocol), нужен для выдачи ip устройствам сети
* **_Определи и выведи на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw)._**
* * Получения внешнего ip роутера
 * ![alt text](images/3-5.png)
* * внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw)
* ![alt text](images/3-6.png)
* **_Задай статичные (заданные вручную, а не полученные от DHCP-сервера) настройки ip, gw, dns (используй публичный DNS-серверы, например 1.1.1.1 или 8.8.8.8)._**
* * Находим файл с настройками сети и dhcp для их изменения
* ![alt text](images/3-7.png)
* * Записываем в него нужные статические данные ip, gw, dns
* ![alt text](images/3-8.png)
* **_Перезагрузи виртуальную машину. Убедись, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте._**
* * Применяем изменения после перезагрузки
* ![alt text](images/3-9.png)
* ![alt text](images/3-10.png)
* * Успешно пропингуй удаленные хосты 1.1.1.1 и ya.ru и вставь в отчёт скрин с выводом команды. В выводе команды должна быть фраза «0% packet loss»
* ![alt text](images/3-11.png)


## Part 4. Обновление ОС
* **_Обнови системные пакеты до последней на момент выполнения задания версии._**
* ![alt text](images/4.png)

## Part 5. Использование команды sudo
*  Используем юзера user с правами на sudo, командой sudo visudo открываем файл и редактируем, добавляем всего одну строчку puppy ALL=(ALL) NOPASSWD: ALL
* ![alt text](images/5-1.png)
*  Сменяем пользователя  и проверка прав доступа
* ![alt text](images/5-2.png)
*  Применяем sudo юзером puppy для смены имени хоста и перезапускаем машину
* ![alt text](images/5-3.png)
* Удостоверяемся в применении изменений
* ![alt text](images/5-4.png)

## Part 6. Установка и настройка службы времени
* Вывожу время и часовой пояс. и проверяю наличие "NTPSynchronized=yes:"
* ![alt text](images/6.png)

## Part 7. Установка и использование текстовых редакторов
* **_Используя каждый из трех выбранных редакторов, создай файл test_X.txt, где X — название редактора, в котором создан файл. Напиши в нём свой никнейм, закрой файл с сохранением изменений._**
* sudo apt-get install vim nano mc - скачиваем редакторы
* В vim нажимаем i для записи, esc для прекращения записи, :wq + enter для выхода
 * ![alt text](images/7-1.png)
* В nano после записи нажимаем ctrlX + y + enter
 * ![alt text](images/7-2.png)
* В mcedit после записи для сохранения нажимаем fn + f2 + enter  для выхода fn + f10
 * ![alt text](images/7-3.png)
 * **_Используя каждый из трех выбранных редакторов, открой файл на редактирование, отредактируй файл, заменив никнейм на строку «21 School 21», закрой файл без сохранения изменений_**
 *  Для выхода без сохранения в vim используем :q!
* ![alt text](images/7-4.png)
 *  В nano для той же цели ctrlX + n
* ![alt text](images/7-5.png)
 *  В mcedit - fn + f10 + "нет"
* ![alt text](images/7-6.png)
 * **_Используя каждый из трех выбранных редакторов, отредактируй файл ещё раз (по аналогии с предыдущим пунктом), а затем освой функции поиска по содержимому файла (слово) и замены слова на любое другое._**
 * / в vim используется для поиска слова
* ![alt text](images/7-7.png)
 * Такая конструкция заменяет все вхождения слова в vim
* ![alt text](images/7-8.png)
 * Для поиска слова nano использует ctrl + W
* ![alt text](images/7-9.png)
 * Для замены - option + R
* ![alt text](images/7-10.png)
* ![alt text](images/7-11.png)
* ![alt text](images/7-12.png)
 * В mcedit используется fn + f7
* ![alt text](images/7-13.png)
 * Аналогично fn + f4 + enter для замены
* ![alt text](images/7-14.png)


## Part 8. Установка и базовая настройка сервиса SSHD
* **_Установи службу SSHd._**
* Для установки ssh пишем sudo apt-get update && sudo apt-get install openssh-server
* Добавление автостарта shh сервиса
* ![alt text](images/8-1.png)
* Запускаем командой sudo systemctl start sshd если не запустился
* Проверяю статус
* ![alt text](images/8-2.png)
* Находим файл sudo nano /etc/ssh/sshd_config и меняем порт с 22 на 2022, убираем # в начале строки
* ![alt text](images/8-3.png)
* Перезапускаем сервис sudo systemctl restart sshd и проверяем изменения порта
* ![alt text](images/8-5.png)
* **_Используя команду ps, покажи наличие процесса sshd. Для этого к команде нужно подобрать ключи._**
* Используем ps aux | grep sshd для вывода инф. о sshd процессах *ps дает информацию о процессах, ключи a (для всех юзеров), u (с инфо о юзере), x (фоновые тоже) *grep shhd фильтрует вывод по слову "sshd" 
* ![alt text](images/8-4.png)
* **_Перезагрузи систему._**
* Перезапускаем систему sudo reboot
* ![alt text](images/8-6.png)
* Используем sudo netstat -tan (ключи: показ tcp соединений, прослушивающих портов, чисел портов и ip) tcp - transmission control protocol, протокол передачи данных; receive и send queue - очередь отправки и приема, пуста, тк не отправлены и не получены никакие данные; Local address: 0.0.0.0 - это особый ip для обработки запросов с любого сетевого интерфейса устройства; Local address: 2022 - указанный номер порта, где сервер ожидает соединение; Foreign address (0.0.0.0:) - принимающий адрес,  означает доступ для любых ip и портов; Listen - прослушивание, состояние обработки запросов


## Part 9. Установка и использование утилит top, htop
* **_Установи и запусти утилиты top и htop_**
*  Используем top для просмотра рабочих процессов, изучаем данные
* ![alt text](images/9.png)
* * Время работы с перезапуска - up 51 min
* * К-во юзеров - 1; средняя нагрузка за последнее время (1 мин, 5 мин, 15 мин): 0,00 0,00 0,00
* * Всего процессов в работе - 107
* * %Cpu(s): 0,0 us, 0,0 sy, 0,0 ni, 100,0 id, 0,0 wa, 0,0 hi, 0,0 si, 0,0 st - нагрузка на процессор
* * MiB Mem: 4083,6 total, 3687,7 free, 153,1 used, 241,8 buff/cache - загрузка опер. памяти
* * MiB Swap: 2814,0 total, 2814,0 free, 0,0 used, 2780,2 avail Mem - загрузка своп-памяти
* * pid процесса с наибольшим исп. памяти (0,6) - 438 (root)
* * pid процесса с наибольшим исп. времени процессора (0,4) - 651 (root)
* Такой результат выводит команда htop, его нужно отсортировать
 * ![alt text](images/9-1.png)
* * Используем f6 для выбора сортировки по pid
 * ![alt text](images/9-2.png)
 * * Аналогично для cpu
  * ![alt text](images/9-3.png)
* *  Аналогично для mem
 * ![alt text](images/9-4.png)
* * Аналогично для time
 * ![alt text](images/9-5.png)

* * Фильтрация для процесса sshd иначе осуществляется - с f4 и вводом sshd
 * ![alt text](images/9-6.png)
* * Поиск для syslog работает по f3
 * ![alt text](images/9-7.png)
* * Добавление hostname, clock и uptime происходит в настройках f2
 * ![alt text](images/9-8.png)


## Part 10. Использование утилиты fdisk
**_Запусти команду fdisk -l._**
 * ![alt text](images/10.png)
* * Имя диска /dev/sda, емкость 30 GiB, model: HARDDISK, 62914560 секторов.
* * swapon --show используем для получения данных о свопе, 2,8G.


## Part 11. Использование утилиты df
* Используем команды df / и df -Th / для просмотра состояния диска корневой системы 
* Для первой команды размер раздела - 13798872 блоков по 1 Кбайт (1k-blocks)  Используемое пространство - 5380344 блоков, свободное - 7695792 блока, в процентах - 42% 
* Для второй команды размер составил 14 Гб, занято пространство 5,2 Гб, свободное - 7,4 Гб, в проц. 42% 
* Тип системы указан как ext4
* ![alt text](images/11.png)


## Part 12. Использование утилиты du
* Используем sudo du -s и -sh для вывода размеров папок; s отвечает за вывод суммарного размера, h - за удобный формат чтения
* ![alt text](images/12.png)
* Для вывода размера каждого элемента в /var/log используем sudo du -ah
* ![alt text](images/12-1.png)



## Part 13. Установка и использование утилиты ncdu
* sudo apt update && sudo apt install ncdu для установки ncdu
* ncdu /home, выход через ctrlC
 * ![alt text](images/13.png)
* ncdu /var
 * ![alt text](images/13-1.png)
* /var/log
 * ![alt text](images/13-2.png)


## Part 14. Работа с системными журналами
* Вручную открываем sudo less указанные файлы и ищем информацию о последнем вхождении в систему; на скрине представлен файл auth.log, где видны все необходимые данные
* ![alt text](images/14.png)
* Последний логин: 5 июня 15:52:24, юзер - user, метод вхождения - login (подразумевает локальный вход)
* После перезапуска systemctl restart sshd находим записи об этом в том же файле
* ![alt text](images/14-1.png)


## Part 15. Использование планировщика заданий CRON
* **_Используя планировщик заданий, запусти команду uptime через каждые 2 минуты._** 
* Записываем после sudo crontab -e задачу для cron,проверяем работу через четыре мин.
 * ![alt text](images/15.png)
 * ![alt text](images/15-1.png)
* crontab -l отображает содержимое файла, активные задачи, crontab -r стирает все задачи
 * ![alt text](images/15-2.png)
 * ![alt text](images/15-3.png)